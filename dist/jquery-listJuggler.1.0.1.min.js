/*!
 * A jQuery plugin for manually reordering lists - v1.0.1 - 2014-07-09
 * https://github.com/davesag/listJuggler
 * Copyright (c) 2014 Dave Sag; Licensed MIT
 */

(function(){if("function"!=typeof jQuery)throw"Expected jQuery to have been loaded before this script."}).call(this),function(){!function(a){var b,c;c=function(b,c){var d,e;for(e=c.match(/(?:\\\.|[^.])+(?=\.|$)/g),d=a(b).data(e.shift());d&&e[0];)d=d[e.shift()];return d||void 0},b=/\s*(?:((?:(?:\\\.|[^.,])+\.?)+)\s*([!~><=]=|[><])\s*("|')?((?:\\\3|.)*?)\3|(.+?))\s*(?:,|$)/g,a.expr[":"].data=function(a,d,e){var f,g,h,i,j,k;for(b.lastIndex=0,h=e[3],j=void 0,g=void 0,k=void 0,f=null,i=!1;j=b.exec(h);){switch(g=j[4],k=c(a,j[1]||j[5]),j[2]){case"==":i=k===g;break;case"!=":i=k!==g;break;case"<=":i=g>=k;break;case">=":i=k>=g;break;case"~=":i=new RegExp(g).test(k);break;case">":i=k>g;break;case"<":i=g>k;break;default:j[5]&&(i=!!k)}f=null===f?i:f&&i}return f}}(jQuery)}.call(this),function(){!function(a,b,c){var d;d=["OL","UL"],a.fn.listJuggler=function(b){var c,e,f,g;return"destroy"===b?void a(this.selector).trigger("listJuggler-destroy"):(f=a.extend(!0,{},a.fn.listJuggler.defaults,b),e=[],g=null,c=null,this.each(function(b,h){var i,j,k,l;if(l=a(this).prop("tagName"),-1===d.indexOf(l))throw"You can only apply this plugin to ordered or unordered lists";i="li",k="<"+i+">&nbsp;</"+i+">",j={text:"",draggedItem:null,placeHolderItem:null,position:null,offset:null,offsetLimit:null,scroll:null,container:h,init:function(){a(this.container).data("list-id",b).mousedown(this.grabItem).on("listJuggler-destroy",this.uninit),this.styleDragHandlers(!0)},uninit:function(){g=e[a(this).data("list-id")],a(g.container).off("mousedown",g.grabItem).off("listJuggler-destroy"),g.styleDragHandlers(!1)},getItems:function(){return a(this.container).children(i)},styleDragHandlers:function(b){this.getItems().map(function(){return a(this).is(i)?this:a(this).find(i).get()}).css("cursor",b?"pointer":"")},grabItem:function(b){var c,d,f,h,j;if(1===b.which&&0!==a(b.target).closest(i).size()){for(b.preventDefault(),f=b.target;!a(f).is(i);){if(f===this)return;f=f.parentNode}c=a(f),c.data("cursor",c.css("cursor")),c.css("cursor","move"),g=e[a(this).data("list-id")],d=a(g.container),j=this,h=function(){g.dragStart.call(j,b),d.off("mousemove",h)},d.mousemove(h).mouseup(function(){d.off("mousemove",h),c.css("cursor",c.data("cursor"))})}},dragStart:function(b){var c,d,h,j,l,m,n;null!=(null!=g?g.draggedItem:void 0)&&g.dropItem(),g=e[a(this).data("list-id")],g.draggedItem=a(b.target).closest(i),g.draggedItem.data("original-position",a(this).data("list-id")+"-"+g.getItems().index(g.draggedItem)),l=parseInt(g.draggedItem.css("marginTop")),j=parseInt(g.draggedItem.css("marginLeft")),g.offset=g.draggedItem.offset(),g.offset.top=b.pageY-g.offset.top+(isNaN(l)?0:l)-1,g.offset.left=b.pageX-g.offset.left+(isNaN(j)?0:j)-1,c=a(g.container),d=0===c.outerHeight()?Math.max(1,Math.round(.5+g.getItems().size()*g.draggedItem.outerWidth()/c.outerWidth()))*g.draggedItem.outerHeight():c.outerHeight(),g.offsetLimit=c.offset(),g.offsetLimit.right=g.offsetLimit.left+c.outerWidth()-g.draggedItem.outerWidth(),g.offsetLimit.bottom=g.offsetLimit.top+d-g.draggedItem.outerHeight(),h=g.draggedItem.height(),n=g.draggedItem.width(),g.draggedItem.after(k),g.placeHolderItem=g.draggedItem.next().css({height:h,width:n}).data("is-placeholder",!0),m=g.draggedItem.attr("style"),g.draggedItem.data("original-style",m?m:""),g.draggedItem.css({position:"absolute",opacity:.8,"z-index":999,height:h,width:n}),g.scroll={moveX:0,moveY:0,maxX:a(f.document).width()-a(f.window).width(),maxY:a(f.document).height()-a(f.window).height()},g.scroll.scrollY=f.window.setInterval(function(){var b;b=a(f.window).scrollTop(),(g.scroll.moveY>0&&b<g.scroll.maxY||g.scroll.moveY<0&&b>0)&&(a(f.window).scrollTop(b+g.scroll.moveY),g.draggedItem.css("top",g.draggedItem.offset().top+g.scroll.moveY+1))},10),g.scroll.scrollX=f.window.setInterval(function(){var b;b=a(f.window).scrollLeft(),(g.scroll.moveX>0&&b<g.scroll.maxX||g.scroll.moveX<0&&b>0)&&(a(f.window).scrollLeft(b+g.scroll.moveX),g.draggedItem.css("left",g.draggedItem.offset().left+g.scroll.moveX+1))},10),a(e).each(function(a,b){b.buildPositionTable()}),g.setPos(b.pageX,b.pageY),a(f.document).on("mousemove",g.swapItems),a(f.document).on("mouseup",g.dropItem)},setPos:function(b,c){var d,e;e=Math.min(this.offsetLimit.bottom,Math.max(c-this.offset.top,this.offsetLimit.top)),d=Math.min(this.offsetLimit.right,Math.max(b-this.offset.left,this.offsetLimit.left)),this.draggedItem.parents().each(function(){var b;return"static"!==a(this).css("position")&&"table"!==a(this).css("display")?(b=a(this).offset(),e-=b.top,d-=b.left,!1):void 0}),c-=a(f.window).scrollTop(),b-=a(f.window).scrollLeft(),c=Math.max(0,c-a(f.window).height()+5)+Math.min(0,c-5),b=Math.max(0,b-a(f.window).width()+5)+Math.min(0,b-5),g.scroll.moveX=0===b?0:5*b/Math.abs(b),g.scroll.moveY=0===c?0:5*c/Math.abs(c),this.draggedItem.css({top:e,left:d})},buildPositionTable:function(){var b;b=[],this.getItems().not([g.draggedItem[0],g.placeHolderItem[0]]).each(function(c){var d,e;d=a(this),e=d.offset(),e.right=e.left+d.outerWidth(),e.bottom=e.top+d.outerHeight(),e.elm=this,b[c]=e}),this.position=b},dropItem:function(){var b;if(null!=g.draggedItem)return b=g.draggedItem.data("original-style"),g.draggedItem.attr("style",b),""===b&&g.draggedItem.removeAttr("style"),g.draggedItem.removeData("original-style"),g.styleDragHandlers(!0),g.placeHolderItem.before(g.draggedItem),g.placeHolderItem.remove(),a(":data(droptarget)").remove(),f.window.clearInterval(g.scroll.scrollY),f.window.clearInterval(g.scroll.scrollX),g.draggedItem.data("original-position")!==a(e).index(g)+"-"+g.getItems().index(g.draggedItem)&&f.callback.apply(g.draggedItem),g.draggedItem.removeData("original-position"),g.draggedItem=null,a(f.document).off("mousemove",g.swapItems),a(f.document).off("mouseup",g.dropItem),!1},swapItems:function(b){var d,f,h,j;return null==g.draggedItem?!1:(g.setPos(b.pageX,b.pageY),j=g.findPosition(b.pageX,b.pageY),d=g,-1===j?!1:(f=function(){return a(d.container).children().not(d.draggedItem)},h=f().not(i).each(function(){this.fixedIndex=f().index(this)}),null==c||c.top>g.draggedItem.offset().top||c.left>g.draggedItem.offset().left?a(d.position[j].elm).before(g.placeHolderItem):a(d.position[j].elm).after(g.placeHolderItem),h.each(function(){var b;b=f().eq(this.fixedIndex).get(0),this!==b&&f().index(this)<this.fixedIndex?a(this).insertAfter(b):this!==b&&a(this).insertBefore(b)}),a(e).each(function(a,b){b.buildPositionTable()}),c=g.draggedItem.offset(),!1))},findPosition:function(a,c){for(b=0;b<this.position.length;){if(this.position[b].left<a&&this.position[b].right>a&&this.position[b].top<c&&this.position[b].bottom>c)return b;b+=1}return-1}},j.init(),e.push(j)}),this)},a.fn.listJuggler.defaults={callback:function(){},document:b,window:c}}(jQuery,self.document,self)}.call(this);
//# sourceMappingURL=jquery-listJuggler.1.0.1.min.js.map