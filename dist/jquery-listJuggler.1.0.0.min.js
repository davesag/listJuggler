/*!
 * A jQuery plugin for manually reordering lists - v1.0.0 - 2014-07-03
 * https://github.com/davesag/listJuggler
 * Copyright (c) 2014 Dave Sag; Licensed MIT
 */

(function(){if("function"!=typeof jQuery)throw"Expected jQuery to have been loaded before this script."}).call(this),function(){!function(a){var b,c;c=function(b,c){var d,e;for(e=c.match(/(?:\\\.|[^.])+(?=\.|$)/g),d=a(b).data(e.shift());d&&e[0];)d=d[e.shift()];return d||void 0},b=/\s*(?:((?:(?:\\\.|[^.,])+\.?)+)\s*([!~><=]=|[><])\s*("|')?((?:\\\3|.)*?)\3|(.+?))\s*(?:,|$)/g,a.expr[":"].data=function(a,d,e){var f,g,h,i,j,k;for(b.lastIndex=0,h=e[3],j=void 0,g=void 0,k=void 0,f=null,i=!1;j=b.exec(h);){switch(g=j[4],k=c(a,j[1]||j[5]),j[2]){case"==":i=k===g;break;case"!=":i=k!==g;break;case"<=":i=g>=k;break;case">=":i=k>=g;break;case"~=":i=new RegExp(g).test(k);break;case">":i=k>g;break;case"<":i=g>k;break;default:j[5]&&(i=!!k)}f=null===f?i:f&&i}return f}}(jQuery)}.call(this),function(){!function(a,b,c){var d;d=["OL","UL"],a.fn.listJuggler=function(e){var f,g,h,i;return"destroy"===e?void a(this.selector).trigger("listJuggler-destroy"):(h=a.extend(!0,{},a.fn.listJuggler.defaults,e),g=[],i=null,f=null,this.each(function(e,j){var k,l,m,n;if(n=a(this).prop("tagName"),-1===d.indexOf(n))throw"You can only apply this plugin to ordered or unordered lists";k="li",m="<"+k+">&nbsp;</"+k+">",l={draggedItem:null,placeHolderItem:null,position:null,offset:null,offsetLimit:null,scroll:null,container:j,init:function(){a(this.container).data("list-id",e).mousedown(this.grabItem).on("listJuggler-destroy",this.uninit),this.styleDragHandlers(!0)},uninit:function(){i=g[a(this).data("list-id")],a(i.container).off("mousedown",i.grabItem).off("listJuggler-destroy"),i.styleDragHandlers(!1)},getItems:function(){return a(this.container).children(k)},styleDragHandlers:function(b){this.getItems().map(function(){return a(this).is(k)?this:a(this).find(k).get()}).css("cursor",b?"pointer":"")},grabItem:function(b){var c,d,e,f,h;if(1===b.which&&0!==a(b.target).closest(k).size()){for(b.preventDefault(),e=b.target;!a(e).is(k);){if(e===this)return;e=e.parentNode}c=a(e),c.data("cursor",c.css("cursor")),c.css("cursor","move"),i=g[a(this).data("list-id")],d=a(i.container),h=this,f=function(){i.dragStart.call(h,b),d.off("mousemove",f)},d.mousemove(f).mouseup(function(){d.off("mousemove",f),c.css("cursor",c.data("cursor"))})}},dragStart:function(d){var e,f,h,j,l,n,o;null!=(null!=i?i.draggedItem:void 0)&&i.dropItem(),i=g[a(this).data("list-id")],i.draggedItem=a(d.target).closest(k),i.draggedItem.data("original-position",a(this).data("list-id")+"-"+i.getItems().index(i.draggedItem)),l=parseInt(i.draggedItem.css("marginTop")),j=parseInt(i.draggedItem.css("marginLeft")),i.offset=i.draggedItem.offset(),i.offset.top=d.pageY-i.offset.top+(isNaN(l)?0:l)-1,i.offset.left=d.pageX-i.offset.left+(isNaN(j)?0:j)-1,e=a(i.container),f=0===e.outerHeight()?Math.max(1,Math.round(.5+i.getItems().size()*i.draggedItem.outerWidth()/e.outerWidth()))*i.draggedItem.outerHeight():e.outerHeight(),i.offsetLimit=e.offset(),i.offsetLimit.right=i.offsetLimit.left+e.outerWidth()-i.draggedItem.outerWidth(),i.offsetLimit.bottom=i.offsetLimit.top+f-i.draggedItem.outerHeight(),h=i.draggedItem.height(),o=i.draggedItem.width(),i.draggedItem.after(m),i.placeHolderItem=i.draggedItem.next().css({height:h,width:o}).data("is-placeholder",!0),n=i.draggedItem.attr("style"),i.draggedItem.data("original-style",n?n:""),i.draggedItem.css({position:"absolute",opacity:.8,"z-index":999,height:h,width:o}),i.scroll={moveX:0,moveY:0,maxX:a(b).width()-a(c).width(),maxY:a(b).height()-a(c).height()},i.scroll.scrollY=c.setInterval(function(){var b;b=a(c).scrollTop(),(i.scroll.moveY>0&&b<i.scroll.maxY||i.scroll.moveY<0&&b>0)&&(a(c).scrollTop(b+i.scroll.moveY),i.draggedItem.css("top",i.draggedItem.offset().top+i.scroll.moveY+1))},10),i.scroll.scrollX=c.setInterval(function(){var b;b=a(c).scrollLeft(),(i.scroll.moveX>0&&b<i.scroll.maxX||i.scroll.moveX<0&&b>0)&&(a(c).scrollLeft(b+i.scroll.moveX),i.draggedItem.css("left",i.draggedItem.offset().left+i.scroll.moveX+1))},10),a(g).each(function(a,b){b.buildPositionTable()}),i.setPos(d.pageX,d.pageY),a(b).on("mousemove",i.swapItems),a(b).on("mouseup",i.dropItem)},setPos:function(b,d){var e,f;f=Math.min(this.offsetLimit.bottom,Math.max(d-this.offset.top,this.offsetLimit.top)),e=Math.min(this.offsetLimit.right,Math.max(b-this.offset.left,this.offsetLimit.left)),this.draggedItem.parents().each(function(){var b;return"static"!==a(this).css("position")&&"table"!==a(this).css("display")?(b=a(this).offset(),f-=b.top,e-=b.left,!1):void 0}),d-=a(c).scrollTop(),b-=a(c).scrollLeft(),d=Math.max(0,d-a(c).height()+5)+Math.min(0,d-5),b=Math.max(0,b-a(c).width()+5)+Math.min(0,b-5),i.scroll.moveX=0===b?0:5*b/Math.abs(b),i.scroll.moveY=0===d?0:5*d/Math.abs(d),this.draggedItem.css({top:f,left:e})},buildPositionTable:function(){var b;b=[],this.getItems().not([i.draggedItem[0],i.placeHolderItem[0]]).each(function(c){var d,e;d=a(this),e=d.offset(),e.right=e.left+d.outerWidth(),e.bottom=e.top+d.outerHeight(),e.elm=this,b[c]=e}),this.position=b},dropItem:function(){var d;if(null!=i.draggedItem)return d=i.draggedItem.data("original-style"),i.draggedItem.attr("style",d),""===d&&i.draggedItem.removeAttr("style"),i.draggedItem.removeData("original-style"),i.styleDragHandlers(!0),i.placeHolderItem.before(i.draggedItem),i.placeHolderItem.remove(),a(":data(droptarget)").remove(),c.clearInterval(i.scroll.scrollY),c.clearInterval(i.scroll.scrollX),i.draggedItem.data("original-position")!==a(g).index(i)+"-"+i.getItems().index(i.draggedItem)&&h.callback.apply(i.draggedItem),i.draggedItem.removeData("original-position"),i.draggedItem=null,a(b).off("mousemove",i.swapItems),a(b).off("mouseup",i.dropItem),!1},swapItems:function(b){var c,d,e,h;return null==i.draggedItem?!1:(i.setPos(b.pageX,b.pageY),h=i.findPosition(b.pageX,b.pageY),c=i,-1===h?!1:(d=function(){return a(c.container).children().not(c.draggedItem)},e=d().not(k).each(function(){this.fixedIndex=d().index(this)}),null==f||f.top>i.draggedItem.offset().top||f.left>i.draggedItem.offset().left?a(c.position[h].elm).before(i.placeHolderItem):a(c.position[h].elm).after(i.placeHolderItem),e.each(function(){var b;b=d().eq(this.fixedIndex).get(0),this!==b&&d().index(this)<this.fixedIndex?a(this).insertAfter(b):this!==b&&a(this).insertBefore(b)}),a(g).each(function(a,b){b.buildPositionTable()}),f=i.draggedItem.offset(),!1))},findPosition:function(a,b){for(e=0;e<this.position.length;){if(this.position[e].left<a&&this.position[e].right>a&&this.position[e].top<b&&this.position[e].bottom>b)return e;e+=1}return-1}},l.init(),g.push(l)}),this)},a.fn.listJuggler.defaults={callback:function(){}}}(jQuery,self.document,self)}.call(this);
//# sourceMappingURL=jquery-listJuggler.1.0.0.min.js.map